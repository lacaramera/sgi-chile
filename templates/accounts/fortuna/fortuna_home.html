{% extends "base.html" %}
{% load static %}
{% block title %}Fortuna{% endblock %}

{% block content %}

<div class="max-w-6xl mx-auto space-y-6">

  <!-- Título grande tipo pestaña -->
  <div class="bg-white rounded-3xl shadow-sm px-8 py-5 border border-gray-100">
    <h1 class="text-2xl font-bold text-sky-800">Revista Fortuna de Chile</h1>
    <p class="text-sm text-gray-500">Accede al material digital y gestiona la información.</p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

    <!-- COLUMNA IZQUIERDA: botones -->
    <div class="space-y-4">

      <!-- Comprar -->
      <a href="{% url 'fortuna_comprar' %}" class="block">
        <div class="flex items-center gap-4 px-6 py-4 rounded-2xl bg-gradient-to-r from-sky-600 to-blue-500 text-white shadow hover:shadow-md transition-shadow">
          <div class="flex items-center justify-center w-10 h-10 rounded-full bg-white/15">
            <!-- icono carrito -->
            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7">
              <path d="M6 6h15l-1.5 9h-12z"/>
              <path d="M6 6l-2-3H2"/>
              <circle cx="9" cy="20" r="1"/>
              <circle cx="18" cy="20" r="1"/>
            </svg>
          </div>
          <span class="font-semibold text-lg">Comprar</span>
        </div>
      </a>

      <!-- Ediciones anteriores -->
      <a href="{% url 'fortuna_ediciones' %}" class="block">
        <div class="flex items-center gap-4 px-6 py-4 rounded-2xl bg-gradient-to-r from-blue-600 to-sky-500 text-white shadow hover:shadow-md transition-shadow">
          <div class="flex items-center justify-center w-10 h-10 rounded-full bg-white/15">
            <!-- icono historial -->
            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7">
              <circle cx="12" cy="12" r="9"/>
              <path d="M12 7v5l3 3"/>
            </svg>
          </div>
          <span class="font-semibold text-lg">Ediciones anteriores</span>
        </div>
      </a>

      <!-- Acceder a material -->
      <a href="{% url 'fortuna_material' %}" class="block">
        <div class="flex items-center gap-4 px-6 py-4 rounded-2xl bg-gradient-to-r from-indigo-600 to-violet-500 text-white shadow hover:shadow-md transition-shadow">
          <div class="flex items-center justify-center w-10 h-10 rounded-full bg-white/15">
            <!-- icono libro -->
            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7">
              <path d="M4 5a3 3 0 0 1 3-3h12v19H7a3 3 0 0 0-3 3z"/>
              <path d="M7 2v19"/>
            </svg>
          </div>
          <span class="font-semibold text-lg">Acceder a material</span>
        </div>
      </a>

      <!-- Ayuda -->
      <a href={% url 'help' %} class="block">
        <div class="flex items-center gap-4 px-6 py-4 rounded-2xl bg-gradient-to-r from-sky-500 to-cyan-500 text-white shadow hover:shadow-md transition-shadow">
          <div class="flex items-center justify-center w-10 h-10 rounded-full bg-white/15">
            <!-- icono info -->
            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7">
              <circle cx="12" cy="12" r="9"/>
              <path d="M12 16v-4"/>
              <path d="M12 8h.01"/>
            </svg>
          </div>
          <span class="font-semibold text-lg">Ayuda</span>
        </div>
      </a>

      <!-- Miembros compradores (solo admin/directiva/responsables) -->
      {% if can_view_active_members %}

      <a href="{% url 'fortuna_compradores' %}" class="block">
        <div class="flex items-center gap-4 px-6 py-4 rounded-2xl bg-gradient-to-r from-blue-800 to-cyan-400 text-white shadow hover:shadow-md transition-shadow">
          <div class="flex items-center justify-center w-10 h-10 rounded-full bg-white/15">
            <!-- icono usuarios -->
            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7">
              <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
              <circle cx="9" cy="7" r="3"/>
              <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
          </div>
          <span class="font-semibold text-lg">Miembros compradores</span>
        </div>
      </a>

      {% if is_admin_directiva %}
      <a href="{% url 'fortuna_admin_purchases' %}" class="block">
        <div class="flex items-center gap-4 px-6 py-4 rounded-2xl bg-gradient-to-r from-indigo-500 to-violet-500 text-white shadow hover:shadow-md transition-shadow">
          <div class="flex items-center justify-center w-10 h-10 rounded-full bg-white/15">
            <!-- icono check -->
            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7">
              <path d="M9 12l2 2 4-4"/>
              <path d="M12 22c5.5 0 10-4.5 10-10S17.5 2 12 2 2 6.5 2 12s4.5 10 10 10z"/>
            </svg>
          </div>
          <span class="font-semibold text-lg">Revisar solicitudes Fortuna</span>
        </div>
      </a>
      {% endif %}

      {% endif %}

    </div>

    <!-- COLUMNA DERECHA (2 columnas): Portada -->
    <div class="lg:col-span-2">
      <div class="bg-white rounded-3xl shadow-sm border border-gray-100 px-8 py-8 h-full flex flex-col">

        <!-- Encabezado pill -->
        <div class="mb-6">
          <span class="inline-flex items-center gap-2 px-5 py-2 rounded-full bg-sky-600 text-white text-sm font-semibold">
            <span class="inline-flex items-center justify-center w-5 h-5 rounded-full bg-white/20">
              <svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7">
                <path d="M4 5a3 3 0 0 1 3-3h12v19H7a3 3 0 0 0-3 3z"/>
                <path d="M7 2v19"/>
              </svg>
            </span>
            Diciembre
          </span>
        </div>

        <div class="rounded-2xl overflow-hidden border border-gray-100 bg-gray-50 flex items-center justify-center">
          {% if issue and issue.cover_image %}
            <img src="{{ issue.cover_image.url }}"
                alt="Portada Fortuna"
                class="w-full h-[520px] object-contain bg-white" />
            {% else %}
            <img src="{% static cover_static %}"
                alt="Portada Fortuna"
                class="w-full h-[520px] object-contain bg-white" />
            {% endif %}

        </div>

        

      </div>
    </div>

  </div>
</div>

{% endblock %}
